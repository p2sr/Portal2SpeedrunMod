// Globals
::lava <- {
	pos = Vector(),
	textent = null,
	debug = false,
	hurt = function() {
		local health = GetPlayer().GetHealth() - 20;
		EntFire("!player", "SetHealth", health.tostring());
	}
	slice = function(z1, z2) {
		if(pos.z >= z1 && pos.z <= z2) {
			hurt();
			throw 0;
		}
	},
	box = function(x1, y1, z1, x2, y2, z2) {
		if(pos.z >= z1-0.001 && pos.x >= x1 && pos.x <= x2 && pos.y >= y1 && pos.y <= y2 && pos.z <= z2+0.001) {
			hurt();
			throw 0;
		}
		if(debug) DebugDrawBox(Vector(x1, y1, z1), Vector(), Vector(x2-x1, y2-y1, z2-z1), 255, 0, 0, 20, -1);
	},
	bigbox = function(x1, y1, z1, x2, y2, z2) {
		if(pos.z >= z1-0.001 && pos.x >= x1-16 && pos.x <= x2+16 && pos.y >= y1-16 && pos.y <= y2+16 && pos.z <= z2+0.001) {
			hurt();
			throw 0;
		}
		if(debug) DebugDrawBox(Vector(x1, y1, z1), Vector(), Vector(x2-x1, y2-y1, z2-z1), 255, 69, 0, 20, -1);
	},
	safebox = function(x1, y1, z1, x2, y2, z2) {
		if(pos.z >= z1-0.001 && pos.x >= x1 && pos.x <= x2 && pos.y >= y1 && pos.y <= y2 && pos.z <= z2+0.001) {
			throw 0;
		}
		if(debug) DebugDrawBox(Vector(x1, y1, z1), Vector(0, 0, 0), Vector(x2-x1, y2-y1, z2-z1), 0, 255, 0, 50, -1);
	}
};

if(GetDeveloperLevel() == 2) lava.debug = true;

// Set up entities for text and loop timer
if(!Entities.FindByName(null, "floorislava_timer")) {
	local timer = Entities.CreateByClassname("logic_timer");
  timer.__KeyValueFromString("Targetname", "floorislava_timer");
  EntFireByHandle(timer, "AddOutput", "OnTimer !self:RunScriptCode:lava.tick():0:-1", 0, null, null);
  EntFireByHandle(timer, "Enable", "", 0, null, null);
}

if(!Entities.FindByName(null, "floorislava_text")) {
	local text = Entities.CreateByClassname("game_text");
	text.__KeyValueFromInt("SpawnFlags", 1);
	text.__KeyValueFromInt("Channel", 5);
	text.__KeyValueFromFloat("X", -1.0);
	text.__KeyValueFromFloat("Y", 0.9);
  text.__KeyValueFromString("Color", "255 255 255");
	text.__KeyValueFromFloat("HoldTime", 1/30.0);
	lava.textent = text;
}

// Main loop
lava.tick <- function() {

	lava.pos = GetPlayer().GetOrigin();

	try {
		switch(GetMapName().tolower()) {
			case "sp_a1_intro1" :
				/* lava.slice(2705.030, 2705.032); */
				if(lava.pos.y > 3700) lava.slice(2672.025, 2683.17);
				break;
			case "sp_a1_intro2" :
				if(lava.pos.y < 590 && lava.pos.y > -250) {
					lava.slice(-63.9688, -49.1671);
				}
				break;
			case "sp_a1_intro3" :
				if(lava.pos.y > 145 && lava.pos.y < 3663) {
					lava.slice(1104.030, 1104.032);
					lava.slice(975.531, 988.031);
					lava.slice(-443.969, -422.484);
				}
				if(lava.pos.y > 1700 && lava.pos.y < 3663) {
					lava.slice(-63.970, -63.968);
					lava.slice(-203.969, -186.318);
				}
				break;
			case "sp_a1_intro4" :
				if(lava.pos.x > -925 && lava.pos.x < -527) {
					lava.slice(-30.7466, -5.94419);
				}
				if(lava.pos.x >= -527 && lava.pos.x < 270) {
					lava.slice(-5.42882, 2.05264);
					lava.slice(-255.970, -255.968);
				}
				if((lava.pos.x >= 270 || lava.pos.y < -190) && lava.pos.x < 1520) {
					lava.slice(-5.24298, 2.49839);
					lava.slice(-127.970, -127.968);
					if(lava.pos.x > 959) lava.slice(97.2195, 134.031);
				}
				break;
			case "sp_a1_intro5" :
				if(lava.pos.y > -785 && lava.pos.y < 656) {
					lava.slice(128, 136.032);
				}
				if(lava.pos.y > 239 && lava.pos.y < 656) {
					lava.slice(256, 264.032);
				}
				break;
			case "sp_a1_intro6" :
				if(lava.pos.y > -655) {
					if(lava.pos.y < -272.031) {
						lava.slice(-128, -120);
					} else {
						lava.slice(-383.970, -383.968);
						if(lava.pos.x > 176 && lava.pos.x < 1490 && (lava.pos.x < 1048 || lava.pos.y < 144)) {
							lava.slice(126.3, 136.031);
						}
					}
					if(!(lava.pos.y > -144 && lava.pos.y < 80 && lava.pos.x > -112 && lava.pos.x < 112) && lava.pos.x < 176) {
						lava.slice(0.031, 8.031);
					}
				}
				lava.box(1088.03, -383.969, 128.004, 1488.55, -254.541, 136.004);
				lava.box(1664.03, -511.969, 128.031, 2239.97, -0.03125, 136.031);
				lava.box(1839.96, 111.721, 128.031, 2175.97, 511.969, 136.031);
				lava.box(2160.06, 128.031, 192.031, 2367.97, 511.969, 200.031);
				lava.box(1088.03, 111, 0.03125, 1856, 511.969, 8.03125);
				lava.box(1696.27, -131.715, 0.03125, 2111.97, 128, 8.03125);
				lava.box(1344.03, -383.969, 0.03125, 1855.97, -112.29, 8.03125);
				lava.box(1344.03, -127.969, -635.969, 1856, 127.969, -634.969);
				break;
			case "sp_a1_intro7" :
				lava.box(207.868, -63.9688, 1344.03, 381.546, 63.9972, 1352.03);
				lava.box(-783.969, -503.969, 1200.03, 191.999, 191.982, 1224.03);
				lava.box(-639.992, 159.99, 1200.03, 191.969, 319.993, 1224.03);
				lava.box(-1311.97, -895.969, 1230.03, -320.52, -528.031, 1240.03);
				lava.box(-1596.19, -511.969, 1216.03, -1264.03, -320.031, 1224.03);
				lava.box(-2383.97, -479.969, 1216.03, -2247.38, -355.404, 1224.03);
				lava.box(-2383.97, 80.0312, 1216.03, -2112.03, 207.969, 1224.03);
				lava.box(-2303.97, 226.732, 1216.03, -2112.01, 477.268, 1224.03);
				break;
			case "sp_a1_wakeup" :
				lava.box(6912.03, 640.063, 384.031, 7288.96, 1367.18, 392.031);
				lava.box(7200.37, 1145.89, 416.031, 8144.03, 1273.03, 424.031);
				lava.box(8208.03, 1024.03, 416.031, 8606.53, 1407.97, 424.031);
				lava.box(8624.08, 446.840, 384.031, 10752, 1632.03, 404.128);
				lava.box(10768, 960.031, -335.969, 10992, 1407.97, -327.969);
				lava.box(10160, 1040.88, -339.969, 10749.1, 1407.99, -331.969);
				break;
			case "sp_a2_intro" :
				if(lava.pos.x < -830) {
					lava.box(-3452.58, 199.5, -10815.8, -3168.72, 866.765, -10807.8);
					lava.box(-2936.77, 111.635, -10821.7, -2353.05, 165.683, -10813.7);
					lava.box(-2615.88, 79.0574, -10816, -2352.88, 126.194, -10808);
					lava.box(-1927.74, 288.003, -11008, -1551.97, 511.969, -10952);
					lava.box(-1600, 288.031, -11070, -832.031, 607.969, -11050);
				} else {
					lava.box(-800.211, -319.999, -10859, 63.9688, 575.969, -10845.9);
					lava.box(-63.9688, -447.969, -10752, 335.791, -192.012, -10744);
					lava.box(320.031, -320, -10888, 639.969, 447.997, -10862.4);
					lava.box(624.12, 50, -10752, 959.969, 319.997, -10744);
					lava.box(-95.9688, -159.969, -10752, 479.996, 575.905, -10744);
					lava.box(192.031, 320.009, -10888, 639.969, 591.969, -10868.8);
					lava.box(-637.547, 565.149, -10752, 127.98, 895.969, -10744);
				}
				break;
			case "sp_a2_laser_intro" :
				lava.box(-319.969, -239.986, -151.969, 383.969, 240, -119.969);
				lava.box(-637.547, -95.9976, -124.248, -317.842, 91.9422, -116.248);
				lava.box(368.351, -95.9689, -39.9688, 557.547, 53.3964, -25.9706);
				break;
			case "sp_a2_laser_stairs" :
				lava.box(-909.969, -447.955, -95.9688, -784.751, -253.048, -87.9688);
				lava.box(-783.969, -478.175, -99.8852, -624, -230.795, -93.0977);
				lava.box(-623.999, -478.303, -95.9813, 271.543, 479.969, -87.9813);
				lava.box(16.0312, 208.031, 32.0312, 335.969, 447.969, 40.0312);
				lava.box(-47.9985, 208.031, 32.0312, 16.0573, 351.969, 40.0312);
				break;
			case "sp_a2_dual_lasers" :
				lava.box(-284.336, -975.969, 896.01, -160.031, -784.644, 904.01);
				lava.box(-345.962, -783.969, 896.031, -95.6416, -528.005, 904.031);
				lava.box(-287.969, -527.793, 896.031, -160.031, -402.453, 904.031);
				lava.box(-287.969, -365.546, 896.031, -160.026, -288.022, 904.031);
				lava.box(-416.702, -288.382, 896.031, 351.969, 351.969, 904.031);
				lava.box(349.969, 128.031, 896.031, 381.97, 319.969, 904.031);
				lava.box(224.031, -367.862, 896.031, 351.997, -289.846, 906.158);
				lava.box(160.031, -671.969, 768.019, 479.969, -352.031, 776.019);
				lava.box(-415.969, 47.9253, 1087.53, -144.027, 367.118, 1095.53);
				lava.box(-15.9487, -47.9838, 1031.44, 208.239, 175.68, 1039.44);
				break;
			case "sp_a2_laser_over_goo" :
				if(lava.pos.x > 3600) {
					lava.box(3936.03, -2431.97, 160.031, 4063.97, -2367.98, 168.031);
					lava.box(3904.03, -2367.97, 160.031, 4095.95, -2256.03, 168.031);
					lava.box(3854.83, -2255.99, 160.013, 4063.99, -1600.03, 165);
					lava.box(3618.45, -1727.97, 32.0312, 3871.97, -1600.01, 40.0312);
				} else {
					lava.box(3392.03, -1983.97, 32.0312, 3583.97, -1792.27, 40.0312);
					lava.box(2688.03, -1791.97, 32.0312, 2879.63, -1600.03, 40.0312);
					lava.box(2688.01, -1151.97, 32.0312, 2895.98, -864.031, 40.0312);
				}
				break;
			case "sp_a2_catapult_intro" :
				if(lava.pos.y > 300) {
					lava.box(-127.969, 1505.2, -415.969, -0.03125, 1695.97, -407.969);
					lava.box(-160.458, 960.017, -415.969, 63.9688, 1503.97, -407.969);
					lava.box(-127.969, 898.875, -416, -0.03125, 952.293, -407.969);
					lava.box(-275.765, 331.96, -439.969, 144.086, 863.975, -415.968);
				} else {
					lava.box(-272.474, -1439.97, -447.969, 147.766, -592.221, -439.969);
					lava.box(-192.297, -1120.3, -439.969, 63.9351, -767.006, -431.969);
					lava.box(-129.02, -799.82, -431.969, 0.387684, -767.452, -423.969);
					lava.box(-160.227, -1054.79, -423.969, 32.5471, -799.702, -415.969);
					lava.box(-128.196, -1087.47, -423.969, 0.482076, -1054.92, -415.969);
					lava.box(-130.48, -767.892, -439.969, 2.50492, -735.311, -431.969);
					lava.box(-161.341, -1119.03, -439.969, 32.8988, -1023.59, -423.969);
				}
				break;
			case "sp_a2_trust_fling" :
				//if(lava.pos.y < -250) {
					//lava.box(960.031, -1695.97, -255.969, 1087.97, -1632.02, -247.969);
					//lava.box(928.031, -1631.97, -255.969, 1119.97, -1503.97, -247.969);
					//lava.box(928.031, -1087.97, -255.969, 1117.74, -994.453, -247.969);
					//lava.box(960.031, -1120.13, -255.969, 1087.98, -1086.97, -247.969);
					lava.bigbox(-127.977, -959.969, -255.969, 1152.47, -703.797, -247.969);
					lava.bigbox(608.058, -703.665, -255.969, 1152.18, -320.03, -247.969);
				//} else {
					lava.bigbox(1600.23, 192.031, -255.969, 1920, 1087.97, -247.969);
					lava.bigbox(1584.03, -61.2837, 192.031, 2127.86, 159.969, 200.031);
					lava.bigbox(1890.72, -95.9688, 192.031, 1997.27, -51.9688, 200.031);
					lava.bigbox(-263.852, 1088.82, -249.612, -128.031, 1375.97, -223.969);
					lava.bigbox(-1791.97, 704.031, -383.969, -1535.98, 1343.97, -375.969);
					lava.bigbox(-1407.97, 672.031, 0.03125, -1280.03, 704.031, 8.03125);
					lava.bigbox(-1408.28, 704.007, 0.03125, -1152.24, 1087.91, 8.03125);
					lava.bigbox(-1152.17, 961.636, 0.03125, -960.504, 1087.89, 8.03125);
					lava.bigbox(-1279.78, 1087.98, 0.03125, -1024.68, 1343.97, 8.03125);
				//}
				break;
			case "sp_a2_pit_flings" :
				if(lava.pos.z < -260) {
					lava.box(-31.9698, -1117.55, -767.969, 159.952, -992.305, -759.969);
					lava.box(0.0177288, -995.269, -766.029, 190.833, -736.001, -758.029);
					lava.box(0.00488853, -736.327, -767.969, 126.395, -512.231, -759.969);
					lava.box(-191.969, -511.969, -767.969, 447.969, -256.031, -759.969);
					lava.box(0.466419, -254.911, -767.969, 447.969, 95.9688, -759.969);
				} else {
					lava.bigbox(-383.969, 96.4555, -255.969, 703.969, 370, -247.969);
					lava.bigbox(-383.988, -36.2326, -256.39, 125.483, 96.5926, -248.39);
					lava.bigbox(-383.969, -255.969, -255.969, -0.156839, -36.5537, -247.969);
					lava.bigbox(-287.969, -671.99, -255.969, -191.186, -255.78, -247.969);
					lava.bigbox(-191.729, -670, -255.969, 703.969, -511.784, -247.969);
					lava.bigbox(448.315, -512, -255.969, 703.969, 96.1806, -247.969);
					lava.bigbox(-511.969, -639.969, -127.969, -288.443, -257.075, -119.969);
				}
				break;
			case "sp_a2_fizzler_intro" :
				lava.box(-317.547, -223.969, -63.9688, -126.782, -32.0007, -55.9688);
				lava.box(-127.969, -415.969, -63.9688, 543.969, 95.9688, -55.9688);
				lava.box(543.692, -159.969, -63.9688, 669.548, 31.969, -55.9688);
				lava.bigbox(-114.623, -1023.97, 0.03125, 543.969, -413.807, 8.03125);
				break;
			case "sp_a2_sphere_peek" :
				lava.box(-1947.97, 650, -191.969, -1696.03, 1250, -187);
				lava.box(-2271.97, 1248.03, -191.969, -1504.03, 1900, -183.969);
				lava.box(-1587.76, 1250, 61.056, -700, 2461, 69.056);
				lava.bigbox(-736.602, 1248.03, 320.031, -352.031, 1887.97, 328.031);
				lava.bigbox(-863.895, 1248.03, 320.031, -736.186, 1376.17, 328.031);
				break;
			case "sp_a2_ricochet" :
				lava.box(1192.35, 1550, -1439.97, 1440.04, 2150, -1431.97);
				lava.bigbox(1120.03, 768.031, -1439.97, 2655.97, 1535.97, -1431.97);
				lava.bigbox(1249.02, 256.031, -1311.97, 1759.97, 511.682, -1303.97);
				lava.bigbox(2016.48, 512.031, -1439.97, 2143.97, 768.159, -1431.97);
				lava.box(1248.03, 512.031, -1951.97, 2015.97, 767.969, -1943.97);
				lava.bigbox(2272.54, 768.031, -927.969, 3295.97, 1535.97, -919.969);
				lava.bigbox(2143.97, 1408.05, -927.969, 2272.92, 1536, -919.969);
				lava.bigbox(1983.99, 768.031, -383.969, 2591.96, 1535.98, -375.969);
				lava.bigbox(3296.2, 896.031, -511.969, 3807.97, 1279.97, -503.969);
				break;
			case "sp_a2_bridge_intro" :
				lava.box(-799.932, -349.547, 0.03125, -607.994, 160, 8.03125);
				lava.box(-799.932, -831.969, 0.03125, -383.922, -386.453, 8.03125);
				lava.box(-383.969, -895.969, 0.03125, 383.969, -492.018, 8.03125);
				lava.bigbox(400.031, -895.969, 0.03125, 655.969, -576.031, 8.03125);
				lava.bigbox(-94.2293, -511.905, -15.0289, 64.8416, -443.856, -1.66881);
				lava.bigbox(-544, -320.064, 64.0312, -256.209, -192.194, 72.0312);
				lava.box(-544, -383.96, 64.0312, -416.007, -320.179, 72.0312);
				lava.bigbox(-255.969, 192.092, 0.03125, 255.969, 575.969, 8.03125);
				lava.bigbox(-128.16, 128.098, 0.03125, 128.296, 193.057, 8.03125);
				lava.bigbox(-63.9709, 60.0596, 0.00427246, 64.0783, 128.278, 8.00427);
				break;
			case "sp_a2_bridge_the_gap" :
				lava.box(-1600, -360, 1152.03, -1312.03, 230, 1160.03);
				lava.box(-1558.97, -735.969, 1152, -630, -384.031, 1160);
				lava.bigbox(-621.547, -703.969, 1152.03, 191.969, -575.816, 1160.03);
				lava.bigbox(-319.969, 320.214, 896.031, 191.998, 703.969, 904.031);
				lava.box(226.453, 416.031, 896.031, 383.969, 767.969, 904.031);
				break;
			case "sp_a2_turret_intro" :
				lava.box(482.453, -1983.97, -127.969, 1280, -1024.03, -119.969);
				lava.box(320.012, -1183.97, 0.03125, 736.202, -1023.97, 8.03125);
				lava.box(320.011, -1023.84, 0.03125, 1151.97, 60, 8.03125);
				lava.box(514.031, 192.031, -255.969, 767.979, 441.969, -247.969);
				break;
			case "sp_a2_laser_relays" :
				lava.box(1216.03, -793.969, -63.9688, 1341.27, -614.031, -55.9688);
				lava.box(-703.969, -1087.97, -1, 447.969, -160, 8.03125);
				lava.box(-243.1, -743.969, -191.969, 976.09, -600, -188.969);
				break;
			case "sp_a2_turret_blocker" :
				lava.box(-1005.55, -959.969, -20, 767.969, 1540, 8.03125);
				lava.bigbox(-95.8842, -255.969, 64.0312, 223.663, 64.2053, 72.0312);
				lava.bigbox(-384.032, 383.925, 256.031, 512.141, 640.333, 264.031);
				lava.bigbox(-64.2237, 640.045, 255.031, 192.305, 864.287, 263.031);
				lava.bigbox(0.220762, -0.0482588, 256.031, 128.038, 384.111, 264.031);
				lava.bigbox(0.149395, -256, 254.477, 128.683, -191.982, 262.477);
			break;
			case "sp_a2_laser_vs_turret" :
				lava.box(-223.969, -590.546, 256.031, -96.0312, -320.066, 264.031);
				lava.box(-420, -319.969, 243.031, 151.969, 510, 264.031);
				lava.box(224.048, -319.969, 226.199, 379.455, -128.296, 234.199);
				lava.box(154.554, -319.969, 256.031, 200.031, -96.0539, 264.031);
				lava.box(192.129, -319.97, 240.031, 224.204, -96.4084, 248.031);
				lava.box(224.338, -128.161, 240.031, 380.99, -96.1574, 248.031);
				lava.box(150, -96.0473, 256.031, 511.969, 510, 264.031);
				break;
			case "sp_a2_pull_the_rug" :
				lava.box(-319.969, -1100, -192.514, 319.969, 500, -184.514);
				lava.bigbox(0.03125, 480.315, 64.0312, 127.969, 669.547, 72.0312);
				break;
			case "sp_a2_column_blocker" :
				lava.box(-223.969, -1167.97, 256.031, 71.9688, -550, 264.031);
				lava.box(239.508, 1007.46, 127.374, 767.969, 1407.97, 135.374);
				lava.bigbox(-384.231, -575.969, 0.03125, 640.569, 688.391, 8.03125);
				lava.bigbox(-767.969, -575.969, 0.03125, -384.376, -160.184, 8.03125);
				lava.bigbox(-511.94, -160.088, 0.03125, -383.754, 32.089, 8.03125);
				lava.bigbox(-512.187, 559.885, 0.03125, -383.944, 687.897, 8.03125);
				lava.box(640.353, -580, 0.03125, 1023.97, -8.03125, 8.03125);
				lava.bigbox(-767.981, 128.382, 0.03125, -639.917, 384.583, 8.03125);
				break;
			case "sp_a2_laser_chaining" :
				lava.bigbox(-767.969, -63.9455, 256.031, -384.396, 225, 264.031);
				lava.bigbox(-511.969, -447.969, 192.031, -383.906, -319.825, 200.031);
				lava.bigbox(-511.969, 512.128, 576.031, -447.919, 576.117, 584.031);
				lava.box(-520, -1215.97, -127.969, 260, 1023.99, -119.969);
				lava.bigbox(672.231, -831.969, 256.031, 1055.97, -448.031, 264.031);
				lava.bigbox(-895.969, -1151.97, 256.031, -512.124, -768.029, 264.031);
				lava.bigbox(511.743, 192.031, 256.031, 831.969, 639.969, 264.031);
				lava.box(303.877, 431.535, 255.61, 512.131, 1023.98, 263.61);
				lava.box(242.842, -213.733, -191.969, 511.969, 319.969, -183.969);
				lava.box(258.66, 319.749, -127.969, 511.999, 1023.97, -119.969);
				lava.box(258.863, -1227.34, -127.969, 671.637, -192.061, -119.969);
				break;
			case "sp_a2_triple_laser" :
				lava.box(7168.03, -6015.97, 0.03125, 7744.97, -5120.03, 8.03125);
				lava.box(7744.48, -6147.78, 0.0312462, 8420.33, -5312, 8.03125);
				break;
			case "sp_a2_bts1" :
				if(lava.pos.x < -2900) {
					lava.bigbox(-9440.08, -2210, 0.03125, -9032.03, -1056, 8.03125);
					lava.bigbox(-9632.7, -1472.07, 0.03125, -9440.19, -1055.89, 8.03125);
					lava.bigbox(-9887.97, -1472.23, 0.03125, -9632.52, -420, 8.03125);
					lava.box(-4127.97, -2200, 0.03125, -3050, -544.031, 8.03125);
				} else {
					lava.box(-2880, -1989.76, 0.03125, -1756.03, -559, 8.03125);
					lava.box(-2151.97, -559.25, 0.03125, -2072.06, -514.031, 8.03125);
					lava.box(-2039.97, -600, -63.9688, -1738.6, -472.031, -55.9688);
					lava.box(-1640.99, -551.969, 0.0312443, -1562.28, -472.12, 8.03124);
					lava.box(-1368.8, -777.179, 128.031, -1240.03, -472.031, 136.031);
					lava.box(-1240.13, -677.975, 128.031, -904.214, -600.031, 136.031);
					lava.box(-1405.97, -1029.97, 64.0312, -1242.02, -873.951, 72.0312);
					lava.box(-1242.15, -1029.99, 64.0312, -1046.25, -954.031, 72.0312);
					lava.box(-950.2, -1029.99, 0.03125, -536.031, -600.03, 8.03125);
					lava.box(-537.543, -1031.97, 0.03125, 223.999, -960.934, 8.03125);
					lava.box(128.031, -960.031, 0.03125, 223.969, -928.031, 8.03125);
					lava.bigbox(160.031, -287.886, -63.9688, 959.979, 287.969, -55.9688);
					lava.bigbox(-639.969, -1295.81, -63.9688, 1151.95, -623.869, -55.9688);
				}
				break;
			case "sp_a2_bts2" :
				lava.bigbox(1143.9, -4167.97, -31.9688, 2228.47, -3207.53, -27.9688);
				lava.box(1125.99, -3072.47, -31.9688, 1216.47, -2982.19, -23.9688);
				lava.box(1223.53, -3207.26, -31.9688, 1720.47, -3079.53, -23.9688);
				lava.bigbox(2149.03, 1504.03, 624.031, 2271.97, 1660.85, 632.031);
				lava.box(2144.03, 1660.99, 624.031, 2271.97, 1999.97, 633.026);
				lava.box(1136.03, -2983.97, -15.9688, 2237.97, -2044.03, -7.96875);
				lava.box(1272.03, -2044.25, -15.9688, 1351.97, -1729.02, -7.96875);
				lava.box(1272.03, -1351.62, 240.031, 1351.99, -1184.03, 248.031);
				lava.box(1184.03, -1183.97, 192.031, 1441.9, -669.58, 240.031);
				break;
			case "sp_a2_bts3" :
				lava.box(4160.03, 752.031, 128, 4287.97, 1073.87, 137.025);
				lava.box(4144.03, 1088.03, 128.031, 4595.97, 1215.97, 136.031);
				lava.box(4596.23, 1120.03, 128.031, 4684.74, 1183.97, 136.031);
				lava.box(4684.03, -551.969, 128.031, 5590.97, 1343.97, 136.031);
				lava.box(5590.98, -166.969, 128.031, 5895.18, -89.0016, 136.031);
				lava.box(6003.11, -166.992, 192.031, 6163.95, 73.4958, 200.031);
				lava.bigbox(5824.03, 192.031, 128.031, 6739.97, 357.916, 136.031);
				lava.bigbox(6630.59, 360.031, 128.031, 6739.97, 435.969, 136.031);
				lava.bigbox(5824.03, 357.326, 126.031, 6273.6, 444.192, 134.031);
				lava.bigbox(6722.03, 745.608, 142.031, 6975.97, 828.969, 150.031);
				lava.box(6818.03, 950.602, 209.280, 7281.97, 1737.2, 212);
				lava.bigbox(7206.02, 1834.29, 140.561, 7281.97, 1995.04, 148.561);
				lava.bigbox(7192.03, 2148.48, -191.969, 7271.97, 2244.44, -183.969);
				lava.bigbox(7074.03, 2764.03, 64.0312, 7389.97, 2843.97, 72.0312);
				lava.box(7168.03, 2672.03, 64.0312, 7295.97, 2763.45, 72.0312);
				lava.bigbox(8990.78, 3093.31, -260, 9373.97, 3191.95, -247.969);
				lava.bigbox(9088.03, 3192, -255.969, 9212.94, 3503.39, -247.969);
				lava.box(9088.01, 3523.43, -479.969, 9215.97, 3871.97, -471.969);
				lava.bigbox(6466.03, 2944.03, -255.969, 9855.69, 3099.28, -247.969);
				lava.box(9136.03, 5408.03, -383.969, 9407.97, 5655.97, -375.969);
				lava.box(8817.53, 6668.53, -255.969, 9583.97, 6751.97, -247.969);
				lava.box(8194.81, 5736.03, -319.969, 8750.47, 6390.47, -311.969);
				lava.box(7840.53, 5736.03, -383.969, 8086.52, 5815.97, -375.969);
				lava.box(7551.98, 4992, -383.969, 7846.97, 5856, -375.969);
				lava.bigbox(6592.03, 4608.03, -1791.97, 6783.97, 5109.72, -1783.97);
				lava.box(6322.26, 4746.28, -1791.97, 6591.94, 4991.97, -1783.97);
				lava.box(5872.03, 4866.73, -1791.97, 6322.4, 4991.99, -1783.97);
				break;
			case "sp_a2_bts4" :
				lava.box(704.089, -3199.97, 7168.03, 1055.97, -3074.73, 7176.03);
				lava.box(1088.03, -3525.97, 7168.03, 1477.97, -2850, 7176.03);
				lava.box(1055.98, -3162.97, 7168.03, 1088.04, -3109.03, 7176.03);
				lava.bigbox(1714.91, -3757.97, 7162.03, 1877.3, -2704.44, 7170.03);
				lava.bigbox(1679.16, -3760, 7132.03, 1904.51, -2704.03, 7140.03);
				lava.bigbox(2248.77, -4463.97, 7278.03, 2485.82, -2832.03, 7286.03);
				lava.bigbox(2280.77, -4461.32, 7292.03, 2451.05, -2832.52, 7300.03);
				lava.box(2210.03, -4327.97, 6656.03, 3168.06, -4248.03, 6664.03);
				lava.box(3160.03, -4327.97, 6656.03, 3293.97, -4194.03, 6664.03);
				lava.box(3026.01, -4967.97, 6656.03, 3239.97, -4328.19, 6664.03);
				lava.box(2080.03, -4976, 6656.03, 3025.81, -4864.03, 6664.03);
				lava.box(2064.03, -5247.97, 6656.03, 2255.97, -4983.53, 6664.03);
				lava.box(2255.97, -5247.97, 6656.03, 2296.47, -5056.03, 6664.03);
				lava.box(2162.53, -6436.97, 6656.03, 2260.97, -5248.13, 6656.50);
				lava.box(699.031, -6692.97, 6656.03, 2162.59, -6329.01, 6656.50);
				lava.box(1284.74, -6662.97, 6912.03, 1828.97, -6555.03, 6920.03);
				lava.box(1721, -7104.62, 6912.03, 1798.97, -6662.99, 6920.03);
				lava.box(990.192, -7620.97, 6656.03, 1798.1, -7182.44, 6664.03);
				lava.box(1385.03, -7182.29, 6656.03, 1503.97, -7134.03, 6664.03);
				lava.box(1414.76, -7139.05, 6656.03, 1473.35, -7106.59, 6664.03);
				lava.box(688.031, -7615.97, 6656.03, 973.268, -7464.03, 6664.03);
				lava.box(537.031, -7590.99, 6656.03, 687.884, -7163.03, 6656.50);
				lava.box(-480, -7259.97, 6656.03, 537.175, -7192.03, 6656.50);
				lava.box(-687.297, -7263.32, 6656.03, -495.031, -7200.03, 6664.03);
				lava.box(-830.001, -7911.97, 6656.03, -704.031, -7044.03, 6656.50);
				lava.box(-1984, -7936, 6656.03, -830.031, -7044.03, 6664.03);
				lava.box(-2111.97, -7935.97, 6656.03, -1983.92, -7044.03, 6656.50);
				lava.box(-2332.66, -7443.99, 6656.03, -2111.98, -7368.53, 6664.03);
				lava.box(-2695.97, -7702.97, 6528.03, -2537.55, -7368.03, 6536.03);
				lava.box(-2326.23, -7702.99, 6400.03, -2169, -7368.03, 6408.03);
				lava.box(-3839.97, -7443.97, 6272.03, -2537.58, -7104.03, 6275);
				lava.box(-3840, -7487.97, 6272.03, -3488.03, -7443.82, 6272.50);
				lava.box(2679.57, -5247.97, 6624.03, 2959.97, -4995.03, 6632.03);
				break;
			case "sp_a2_bts5" :
				lava.box(2505.61, -1791.97, 3392.03, 3628.89, -761, 3395.03);
				lava.box(2076.01, -867.969, 3520.03, 2300.54, -585.432, 3528.03);
				lava.box(2076.01, -381.059, 3648.03, 2147.97, 255.847, 3651.03);
				lava.box(2058.28, 256.031, 3648.03, 2175.97, 316.968, 3648.50);
				lava.box(2048.03, 336.031, 3648.03, 2175.97, 767.969, 3648.50);
				lava.box(2073.03, 764.303, 3649.54, 2150.97, 796.444, 3657.54);
				lava.box(2043.03, 905.031, 3616.03, 2879.88, 1012.97, 3624.03);
				lava.box(2073.03, 852.752, 3617.54, 2150.97, 904.69, 3625.54);
				lava.box(2083.03, 910.031, 4352.03, 2879.61, 982.969, 4355.03);
				lava.box(2649.03, 982.913, 4352.03, 2726.97, 1040.97, 4360.03);
				lava.box(2521.13, 770.748, 4352.03, 2598.99, 910.149, 4360.03);
				lava.box(2393.03, 982.75, 4352.03, 2470.98, 1068.97, 4360.03);
				lava.box(2137.01, 983.07, 4352.03, 2214.97, 1068.97, 4360.03);
				lava.box(2496.03, 584.031, 4352.03, 2623.97, 749.167, 4360.03);
				lava.box(2503, 67.5312, 4480.45, 2762.97, 325.971, 4488.45);
				break;
			case "sp_a2_core" :
				lava.box(91.0312, 2982.73, -391.969, 326.992, 3142.97, -383.969);
				lava.box(256.026, 2528.02, -127.969, 319.969, 2587.43, -119.969);
				lava.box(262.031, 2505.8, -127.991, 306.425, 2537.93, -119.991);
				lava.box(-351.189, 2383.61, -127.969, 343.969, 2511.97, -118);
				lava.bigbox(-127.995, 2048.89, -130.571, -1.03124, 2384.27, -122.571);
				lava.box(-2063.97, 32.0312, 247, -1615.53, 352.469, 256.5);
				lava.box(-2063.97, -352.469, 247, -1615.53, -32.0312, 259);
				local coreDoor = Entities.FindByName(null, "rv_trap_fake_door_blocker_2");
				if(coreDoor) lava.box(-1743.66, -32.0829, 256.031, -1615.53, 32.1255, 259);
				local coreDropdown = Entities.FindByName(null, "rv_trap_floor_over_door_1");
				if(coreDropdown.GetCenter().y < 60) lava.box(-2064.47, -32.0195, 247, -1743.58, 32.0187, 259);
				local coreGlass = Entities.FindByName(null, "left_glass_clip");
				if(!coreGlass) lava.box(-706.756, -384, 0, -546.033, 388.805, 8);
				lava.box(-1932.09, -92.0851, -55.7788, -303.911, 95.9688, -47.7788);
				lava.box(47, -422.593, -68, 601.945, 433.113, -56);
				lava.box(-564.173, -422.593, -68, -45, 433.113, -56);
				lava.box(-45.728, -415.987, -68, 46.2491, 263.316, -56);
				local coreElevator = Entities.FindByName(null, "escape_elevator_clip");
				if(coreElevator) lava.box(-45, 262.577, -68, 47.3048, 415.969, -60);
				lava.box(-704.277, -924.285, 0, 741.134, -384.091, 8);
				lava.box(-706.095, 388.191, 0, 738.263, 820.638, 8);
				lava.box(192.454, -384.072, 0, 339.467, -352.04, 8);
				lava.box(339.343, -384.178, 0, 706.201, -255.722, 8);
				lava.box(474.561, -255.942, 0, 738.322, 388.514, 8);
				lava.box(240.335, 196.439, 0, 475, 387.369, 8);
				lava.box(-546, 159.391, 0, -287.069, 388, 8);
				lava.box(-548.201, -384.566, 0, -477.5, -142.532, 8);
				lava.box(-478.405, -384.466, 0, -192.347, -352.168, 8);
				lava.box(-477.843, -352.654, 0, -356.306, -234.033, 8);
				lava.box(-319.969, -1599.97, 0, 319.969, -959.531, 8);
				lava.box(-248.469, -959.557, 0, 248.469, -924.22, 8);
				break;
			case "sp_a3_01" :
				if(lava.pos.y < 2700) {
					lava.slice(-100, 15);
					lava.box(-1746.39, -1018.07, 50, -1241.2, -816.55, 68.2175);
					lava.box(-1634.92, -820, 68, -1419.9, -401.344, 109.004);
					lava.box(-1824, -482.388, -10, -767.285, -48, 48.4003);
					lava.bigbox(-677.439, -448, 227.25, -256.031, -64.0241, 280);
					lava.box(-752.474, -447.987, 257.004, -676.774, -236.664, 265.004);
					lava.box(-575.984, -64.5409, 154.155, -128.031, 320, 280);
					lava.box(-1470, 48.0002, 25.3103, -837.719, 319.969, 51.0676);
					lava.box(-1707.43, 120.159, 26.84, -1563.68, 307.097, 42.1568);
					lava.box(-1582.34, 116.9, 12.3191, -1540.03, 230.314, 27.4124);
					lava.box(-1631.97, 448.961, 47.7978, -648.652, 1215.99, 149.563);
					lava.box(-644.109, 1017.54, 99.8126, -592.082, 1215.97, 169.393);
					lava.box(-521.497, 844.519, 73.6497, -0.24301, 1216.02, 177.297);
					lava.box(-1728.03, 466.217, 55.6676, -1634.28, 1120.63, 126.142);
					lava.box(-1631.97, 1280.03, 100, -1167.81, 1522.07, 182.743);
					lava.box(-1050.47, 1280.03, 144.614, -864.044, 1495.22, 159.074);
					lava.box(-865.244, 1339.81, 149.879, -672.031, 2090.35, 237.118);
					lava.box(-672.794, 1280.03, 152.566, -592.031, 1458.23, 188.814);
					lava.box(-527.969, 1282.43, 158.386, -392.545, 1960.56, 281.465);
					lava.box(-543.997, 1960.13, 256.946, -428.724, 2390.26, 312.087);
					lava.box(-826.957, 2094.48, 247.667, -672.031, 2248.87, 255.667);
					lava.bigbox(-863.999, 2560.24, 448.031, 127.969, 2687.97, 456.031);
					lava.bigbox(-192.255, 2131.4, 409.5, 367.485, 2560.15, 456.031);
					lava.box(-543.969, 2452.93, 371.599, -194.007, 2564.13, 448.031);
					lava.box(-371.969, 1698.91, 247.558, -192.031, 2441.6, 447.108);
					lava.bigbox(-1855.99, 1209.78, 428.031, -1608.9, 1535.09, 436.031);
					lava.box(-931.408, 2457.53, 1680.03, -729.531, 2650.96, 1688.03);
					lava.box(-927.969, 3040.7, 1424.03, -761.531, 3206.47, 1432.03);
				} else if(lava.pos.x < 3100) {
					lava.box(-351.791, 2695.88, 448.031, -288.025, 2751.2, 456.031);
					lava.box(-643.469, 2752, 448.031, 95.4886, 3841.97, 456.031);
					lava.bigbox(-703.969, 3839.99, 512.031, -416.031, 4099.47, 520.031);
					lava.box(-693.78, 4224, 120, -200.311, 4537.08, 152.747);
					lava.box(-531.522, 4543.1, 142.844, -485.547, 4660.35, 150.844);
					lava.box(-506.556, 4706.43, 70, -232.256, 4943.98, 121.562);
					lava.box(-539.666, 4767.41, 111.729, -506.98, 4942.45, 121.225);
					lava.box(-239.035, 4842.31, 45, -21.5504, 5071.88, 90.8407);
					lava.box(-332.436, 4932.96, 71.2579, -228.492, 5044.24, 79.2579);
					lava.box(144.106, 5007.88, -71.9535, 489.311, 5265.52, 10.6983);
					lava.box(363.908, 4615.65, -350, 2304.99, 5289.87, -283.056);
					lava.box(2150.48, 4630.95, -297.969, 2233.6, 4712.59, -265.969);
					lava.box(2232.43, 4508.69, -265.969, 2624.02, 4690.76, -257.969);
					lava.box(2623.46, 4512.03, -271.913, 3079.36, 4586.02, -263.913);
				} else {
					lava.box(3297.6, 4383.77, -407.986, 3456, 4589.27, -399.986);
					lava.box(3456.26, 4444.01, -408.969, 3594.77, 4515.83, -400.969);
					lava.box(3593.53, 4313.53, -408.969, 3699.97, 4547.97, -400.969);
					lava.box(3699.64, 4316.87, -408.969, 3764.29, 4386.79, -400.969);
					lava.box(3707.25, 4276.75, -593.433, 3900.52, 4551.44, -539.047);
					lava.box(3837.2, 4261.24, -676.408, 4010.22, 4531.69, -600);
					lava.box(3977.72, 4163.69, -710, 4121.79, 4534.08, -651.365);
					lava.box(4120.51, 4125.34, -700, 4227.84, 4311.15, -649.64);
					lava.box(4221.27, 4110.4, -730, 4425.33, 4310.46, -677);
					lava.box(4536.01, 3792.03, -750, 4815.97, 4311.15, -720);
					lava.box(4424.57, 3984.03, -750, 4536, 4310.51, -720);
					lava.box(4375.97, 3912.26, -721.402, 4429.31, 4115.7, -689.171);
					lava.box(4247.85, 3991.2, -708.879, 4378.83, 4118.04, -651.813);
					lava.box(4118.42, 4393.53, -730, 4247.98, 4554.21, -682.577);
					lava.box(4176.04, 4307.14, -740, 4428.28, 4395.45, -685);
					lava.box(4428.77, 4312.82, -760, 4815.97, 4464.53, -720);
					lava.box(4245.85, 4390.88, -731.665, 4431.89, 4539.4, -708.308);
					lava.box(4944.03, 4271.27, -740, 5089.97, 4464.19, -725.972);
					lava.box(4816.66, 4462.42, -750, 5089.97, 4616.68, -725);
					lava.box(4558.55, 4461.57, -760, 4816.75, 4496.03, -733.97);
					lava.box(4430.43, 4461.97, -760, 4559.09, 4538.95, -734.218);
					lava.box(4547.96, 4494.77, -780, 4818.77, 4793.85, -735.411);
					lava.box(4473.68, 4535.22, -760, 4547.77, 5023.57, -719.217);
					lava.box(4547.11, 4793.75, -770, 4761.52, 5052.01, -726.25);
					lava.box(4815.86, 4697.05, -780.354, 5087.97, 5093.93, -740);
					lava.box(4814.88, 4613.72, -752.195, 4963.57, 4700, -744.195);
					lava.box(4756.96, 4787.59, -772.379, 4823.39, 5070.6, -746.745);
					lava.box(4536.03, 5047.54, -741.299, 4754.37, 5160.8, -723.969);
					lava.box(4536.02, 5160.34, -760, 5029.97, 5471.97, -715.969);
					lava.box(4753.32, 5110.69, -750, 4921.71, 5177.98, -730.254);
					lava.box(5044.89, 5213.44, -745.082, 5101.78, 5328, -737.082);
					lava.bigbox(4816.03, 3728, -543.969, 4944.14, 4463.93, -535.969);
					lava.box(4537.58, 3752.03, -379.969, 4793.97, 3926.41, -371.969);
					lava.box(4792.45, 3754.03, -379.969, 4990.78, 3830.47, -371.969);
					lava.box(5182.68, 3753.53, -507.969, 5417.99, 4384, -499.969);
					lava.box(5082.86, 4207.18, -512.87, 5184.58, 4278.47, -504.87);
					lava.box(5196.53, 4376.79, -505.969, 5762.17, 4851.47, -497.969);
					lava.box(5353.53, 4849.09, -511.969, 5426.97, 5076.31, -503.969);
					lava.box(5128.84, 4617.53, -639.969, 5302.47, 4691.98, -631.969);
					lava.box(5225.53, 4690.66, -639.969, 5302.47, 5471.97, -631.969);
					lava.box(5301.97, 5269.96, -639.969, 5430.47, 5430.47, -631.969);
					lava.bigbox(4408.39, 3792.03, -607.969, 4535.87, 3984.51, -599.969);
					lava.bigbox(4160.59, 3299.7, -403.969, 4815.39, 3792.67, -395.969);
					lava.box(4998.89, 5369.53, -512.942, 5117.13, 5446.17, -504.942);
					lava.box(4568.28, 5270.41, -379.969, 4759.97, 5461.97, -371.969);
					lava.box(4758.28, 5369.53, -379.969, 4806.78, 5443.97, -371.969);
					lava.bigbox(4407.85, 5119.73, -607.969, 4536.5, 5263.99, -599.969);
					lava.box(4944.03, 3699.5, -760, 5439.63, 5262.64, -711.646);
				}
				break;
			case "sp_a3_03" :
				if(lava.pos.x > -6205) {
					if(lava.pos.y < 496) {
						lava.box(-6143.97, -3139.47, -5230, -6016.05, -2488.03, -5213.97);
						lava.bigbox(-6031.97, -3139.47, -5240, -5884.39, -2145.13, -5220);
						lava.box(-5982.47, -2051.89, -5183.05, -5905.53, -101.192, -5175.05);
						lava.box(-5906.9, -1446.47, -5183.97, -5815.53, -1369.53, -5175.97);
						lava.box(-5907.25, -550.469, -5183.97, -5233.53, -441.531, -5175.97);
						lava.box(-5982.47, -3.37049, -5119.03, -5905.53, 62.0669, -5111.03);
						lava.box(-5982.47, 252.225, -4991.97, -5489.53, 454.469, -4983.97);
						lava.box(-6015.51, -233.969, -4990.97, -5231.53, -131.531, -4982.97);
						lava.box(-6016.52, 348.031, -4991.97, -5981.03, 422.469, -4983.97);
						lava.box(-6143.97, -2479.95, -4991.97, -6000, 527.209, -4983.97);
						lava.box(-6001.75, -1855.97, -4991.97, -5361.53, -1753.53, -4983.97);
					} else {
						lava.box(-6203.9, 491.255, -4735.97, -6012.53, 1363.47, -4727.97);
						lava.box(-6014.06, 859.528, -4735.97, -5709.45, 934.471, -4727.97);
						lava.bigbox(-5732.29, 690.258, -4900, -4463.53, 1301.47, -4855.97);
						lava.box(-6390.95, 2046.85, -2399.97, -6026.58, 2549.66, -2391.97);
						lava.box(-4258.92, 1867.75, -2815.97, -3136.03, 2751.74, -2807.97);
						lava.box(-2940.19, 1881.53, -2623.97, -2777.53, 2543.97, -2615.97);
						lava.box(-2751.83, 1524.63, -2079.97, -2640.03, 2543.97, -2071.97);
						lava.box(-3931.93, 1446.26, -2550, -3573.39, 1732.14, -2535.97);
					}
				} else if(lava.pos.y > -600) {
					lava.box(-6689.97, -175.969, -4927.99, -6324.12, -25.8125, -4919.99);
					lava.box(-7056.13, -573.134, -4927.97, -6322.99, 463.774, -4919.97);
					lava.box(-7105.26, -351.969, -4927.97, -7037.32, 252.729, -4919.97);
					lava.box(-7252.46, -351.448, -4960, -7050.6, 467.77, -4931.42);
					lava.box(-7250.76, 468.947, -4975, -6912.03, 703.969, -4952.38);
					lava.box(-7737.97, -351.969, -4991.97, -7247.94, 703.969, -4950.51);
					lava.box(-8402.08, -351.969, -5000, -7735.95, -182.152, -4949);
					lava.box(-8371.78, 293.683, -5000, -7735, 823.969, -4975);
					lava.box(-8371.88, -182, -5000, -7735, 294.619, -4967.87);
					lava.box(-8372.84, 820.097, -5000, -8136.03, 1151.97, -4983.97);
					lava.box(-8751.76, 239.062, -4986.97, -8624.56, 400.248, -4978.97);
					lava.box(-8720.1, -287.882, -4986.97, -8495.95, 272.048, -4978.97);
					lava.box(-8762.25, -351.998, -5000, -8398.42, -286.331, -4972.31);
					lava.box(-8499.22, -289.178, -5000, -8371.36, 1151.97, -4980.79);
					lava.box(-8640.52, 256.091, -5000, -8481.55, 1124.1, -4979.97);
					lava.box(-10190.1, -87.7373, -5000, -8704.27, 1349.71, -4980.96);
					lava.box(-8721.04, 384.514, -4990.33, -8623.66, 1165.61, -4982.33);
					lava.bigbox(-10240, 130.157, -4987.6, -10197.4, 703.969, -4966.68);
					lava.box(-10258.1, 90.5312, -4725.97, -9868.53, 575.065, -4717.97);
					lava.box(-9884.62, 349.531, -4727.97, -8975.8, 677.43, -4719.97);
					lava.box(-8412.54, 591.464, -4744.72, -8131.27, 683.469, -4735.97);
					lava.box(-8144.67, 556.531, -4735.97, -6196.22, 1362.59, -4732.97);
					lava.box(-6390.95, 2046.85, -2399.97, -6026.58, 2549.66, -2391.97);
				}
				break;
			case "sp_a3_jump_intro" :
				if(lava.pos.z < 500) {
					lava.box(-516.992, 1359.45, -91.9688, -9.53126, 1945.62, -88.9688);
					lava.box(-86.4688, 1006.5, -27.9688, 400, 1284.92, -19.9688);
					lava.box(-255.969, 752.021, -31.9688, 447.969, 1023.97, -23.9688);
					lava.box(-447.969, 256.031, -31.9688, 447.969, 464.015, -23.9688);
					lava.box(239.709, 431.45, 288.031, 447.969, 735.969, 296.031);
					lava.box(-447.969, 448.031, 288.004, -239.931, 1023.97, 296.004);
				} else {
					lava.box(-1250.26, 617.984, 540.087, -871.003, 1095.94, 548.087);
					lava.box(-1827.27, 476.402, 912.031, -1531.93, 643.161, 920.031);
					lava.bigbox(-1482.24, 489.085, 936.031, -1277.97, 1770, 944.031);
					lava.box(-1149.34, 1553.07, 548.031, -680.423, 1862.47, 556.031);
					lava.box(-1702.47, 1725.05, 804.031, -1515.75, 1862.47, 812.031);
					lava.box(-2128.48, 741.777, 800.031, -1280.03, 1728, 808.031);
					lava.bigbox(-1857.26, 1727.97, 928.031, -1408.03, 1919.97, 936.031);
					lava.bigbox(-2463.97, 1408.03, 944.031, -2303.89, 1599.97, 952.031);
					lava.box(-2303.97, 1024, 784.031, -2112.03, 1919.97, 792.031);
					lava.bigbox(-1791.99, 656.003, 928.031, -1408.03, 768.384, 936.031);
					lava.bigbox(-1408.34, 768.031, 1184.03, -960.288, 1343.97, 1192.03);
					lava.box(-959.969, 960.031, 1054.03, -192.031, 1343.97, 1062.03);
					lava.bigbox(-191.574, 960.001, 1184.03, -0.03125, 1343.97, 1192.03);
					lava.bigbox(-1793.88, 1403.78, 1504.03, -1472.01, 1535.97, 1512.03);
					lava.box(-1697.97, 1534.6, 1508.03, -834.679, 2118.47, 1516.03);
				}
				break;
			case "sp_a3_bomb_flings" :
				lava.bigbox(-1378.23, -127.969, -1407.97, -1022.51, 1024.33, -1399.97);
				lava.box(-1254.47, 197.331, -1071.97, -1177.53, 438.436, -1063.97);
				lava.bigbox(-385.391, -767.408, -1407.97, 767.675, 512.823, -1399.97);
				lava.bigbox(-464.494, -790.469, 264.031, -288.445, -533.457, 272.031);
				lava.box(-758.469, -790.469, 328.031, -551.362, -425.531, 336.031);
				lava.box(-383.969, -639.992, 0.03125, 639.969, 191.969, 8.03125);
				lava.bigbox(0.03125, -511.969, 320.031, 251.969, -320.042, 328.031);
				lava.bigbox(0.03125, -767.969, 480.031, 767.969, -511.971, 488.031);
				lava.bigbox(511.737, -512.492, 480.031, 767.969, -0.03125, 488.031);
				lava.bigbox(256.031, 191.952, 160.031, 639.982, 383.969, 168.031);
				lava.bigbox(-0.683208, 128.026, 318.031, 515.719, 913.114, 326.031);
				lava.box(0.03125, 1836.69, 576.031, 511.969, 2111.99, 584.031);
				lava.box(-327.713, 1734.76, 576.031, 1.47715, 2124.55, 584.031);
				break;
			case "sp_a3_crazy_box" :
				if(lava.pos.z < 495) {
					lava.bigbox(2201.53, -793.608, -127.969, 2278.47, -38.1579, -119.969);
					lava.box(1664.03, -1391.97, -127.969, 2559.97, -768.031, -119.969);
					lava.box(1405.91, -1483.84, 32.0312, 1688.11, -771.03, 40.0312);
					lava.box(1408.78, -1919.97, 0.03125, 1927.47, -1470.04, 8.03125);
					lava.box(1647.15, -1536.94, 392.031, 2360.46, -770.616, 400.031);
					lava.box(751.447, -1535.99, -127.969, 1169.23, -1262.6, -119.969);
					lava.box(113.562, -1682.3, -127.969, 531.746, -608.152, -119.969);
				} else {
					lava.box(1670.92, -1350.47, 520.031, 1840.47, -1273.53, 528.031);
					lava.box(1183.21, -1464.4, 520.031, 1712.02, -777.531, 528.031);
					lava.box(6.01246, -1824.23, 1152.03, 502.469, -1417.53, 1160.03);
					lava.box(-214.469, -1824.37, 1440.03, 54.2657, -1471.96, 1448.03);
					lava.box(-214.469, -1378.52, 1504.03, -46.2823, -1209.53, 1512.03);
					lava.bigbox(1.8877, -1311.59, 1536.03, 124.249, -1241.53, 1544.03);
					lava.box(128.031, -1529.97, 1536.03, 1427.29, -516.508, 1544.03);
					lava.box(808.788, -662.949, 1664.03, 1151.97, -512.031, 1672.03);
					lava.box(512.031, -503.991, 1920.03, 794.115, -3.5711, 1928.03);
				}
				break;
			case "sp_a3_transition01" :
				if(lava.pos.z < -5050) {
					lava.box(-2305.46, -210.13, -6143.97, -1542.08, -89.5312, -6135.97);
					lava.box(-4166.69, -361.114, -6143.97, -2285.16, 163.894, -6135.97);
					lava.box(-2200, -3158.46, -5960, -1124.91, -1727.96, -5943.97);
					lava.bigbox(-2086.36, -2069.5, -5919.97, -1437.73, -1855.84, -5911.97);
					lava.box(-2183.9, -2336.91, -5295.97, -1980.5, -1870.95, -5287.97);
					lava.box(-2195.58, -2093.92, -5110, -1212.83, -1742.5, -5101);
					lava.box(-3723.63, -1734.72, -5119.97, -1755.83, 473.792, -5111.97);
				} else {
					lava.bigbox(-3146.76, -511.447, -4959.97, -2526.33, -255.103, -4951.97);
					lava.box(-3665.53, -527.194, -4929.97, -3376.2, -353.6, -4921.97);
					lava.box(-3775.97, -253.001, -4863.97, -3708.2, -0.03125, -4855.97);
					lava.box(-3711.97, -272.228, -4895.97, -2728.97, 26.2559, -4887.97);
					lava.box(-2854.47, 9.72339, -4893.97, -2777.53, 372.969, -4885.97);
					lava.box(-3667.28, 387.031, -4895.97, -2371.03, 913.504, -4887.97);
					lava.box(-3679.99, -12.8545, -4927.97, -3374.67, 337.241, -4919.97);
					lava.box(-2806.77, -1500.4, -4671.97, -2416.85, -833.986, -4663.97);
					lava.box(-3657.16, 356.819, -4575.97, -2338.31, 933.225, -4567.97);
					lava.box(-5395.67, 656.031, -4255.97, -4268.31, 5567.97, -4247.97);
					lava.box(-4991.97, 1792.03, -4367.97, -4608.03, 5567.97, -4359.97);
					lava.box(-4758.97, 512.031, -4063.97, -3661.03, 639.969, -4055.97);
					lava.box(-3652.75, 255.226, -4063.97, -3139.03, 639.219, -4055.97);
					lava.box(-2750.97, -166.469, -4159.97, -2219.12, -89.5312, -4151.97);
				}
				break;
			case "sp_a3_speed_ramp" :
				if(lava.pos.x > -400) {
					lava.box(985.531, 925.776, 64.0312, 1062.47, 1115.37, 72.0312);
					lava.box(985.531, 700.372, 0.03125, 1062.47, 829.314, 8.03125);
					lava.box(-55.9047, -127.969, 0.03125, 1087.97, 706.469, 8.03125);
					lava.box(683.247, -127.969, 256.031, 1087.99, 80.6512, 264.031);
					lava.box(482.12, -85.0435, 16.0312, 658.772, 95.4604, 24.0312);
					lava.box(-338.469, -838.469, 384.031, 58.4688, -441.531, 392.031);
					lava.box(-338.469, -838.469, 832.031, 58.4688, -441.531, 840.031);
					lava.bigbox(713.903, -678.469, 384.031, 1073.93, -600.29, 392.031);
					lava.bigbox(-65.2067, -130.163, 648.031, 1091.01, 705.44, 656.031);
				} else {
					lava.bigbox(-897.31, 319.353, 64.0312, -511.799, 447.99, 72.0312);
					lava.box(-1023.97, 208.031, 64.0312, -896.031, 1042.41, 72.0312);
					lava.box(-1300, 1455.53, -63.9688, -792.031, 1727.97, -55.9688);
					lava.box(-1151.97, 111.991, 384.031, -614.481, 895.969, 392.031);
					lava.box(-1104.67, 686.546, 400.031, -942.065, 849.991, 408.031);
					lava.bigbox(-1727.97, -1023.97, 384.031, -896.031, -256.031, 392.031);
					lava.bigbox(-897.088, -1023.46, 384.031, -832.546, -767.494, 392.031);
					lava.box(-1414.47, -258.434, 384.031, -1158.49, 454.469, 392.031);
					lava.box(-1271.62, -246.636, 512.031, -832.531, -4.53125, 520.031);
					lava.box(-825.612, -223.969, 512.031, -435.031, 36.716, 520.031);
				}
				break;
			case "sp_a3_speed_flings" :
				lava.box(1465.53, -954.544, -63.9688, 1635.88, -601.531, -55.9688);
				lava.box(1792.03, -830.834, -319.969, 2303.97, 511.985, -311.969);
				lava.box(2302.6, -379.969, -319.969, 2879.97, -167.37, -311.969);
				lava.box(2302.95, 256.031, -319.969, 2559.97, 511.969, -311.969);
				lava.box(2824.03, 256.031, -319.998, 3839.97, 511.966, -311.998);
				lava.box(3328.03, 840.031, -63.9688, 3584, 1279.97, -55.9688);
				lava.box(2024.03, 992.031, -511.969, 2335.97, 1696, -503.969);
				lava.box(1088.03, 192.031, -447.969, 1535.97, 639.974, -439.969);
				lava.box(949.723, 237.998, -63.9688, 1422.99, 521.967, -55.9688);
				lava.box(2443.92, -207.871, -351.969, 2926.55, -12.7863, -343.969);
				lava.bigbox(559.581, 1113.53, 32.0312, 726.127, 1190.47, 40.0312);
				lava.bigbox(772.52, 1113.53, 0.03125, 1012.64, 1190.47, 8.03125);
				break;
			case "sp_a3_portal_intro" :
				if(lava.pos.z < -1000) {
					if(lava.pos.y < 1000) {
						lava.box(1581.64, -1182.97, -2943.97, 2370, -1081.53, -2935.97);
						lava.box(2390, -1215.97, -3000, 3573.45, 232.123, -2940.97);
						lava.box(2182.31, -464.683, -2639.97, 3234.63, 262.056, -2615.97);
						lava.bigbox(1983.59, 723.995, -1695.97, 2366.92, 975.587, -1687.97);
						lava.bigbox(2009.53, 841.531, -2047.97, 2559.97, 1219.97, -2039.97);
						lava.bigbox(2073.53, 42.6345, -1663.97, 2150.47, 193.515, -1655.97);
						lava.box(1908.73, -1546.53, -1407.97, 2200, -325.072, -1399.97);
						lava.box(600, -1533.97, -1535.97, 2292.47, -1035, -1527.97);
						lava.box(218.031, -832.049, -1663.97, 677.339, -666.031, -1655.97);
					} else {
						lava.bigbox(2009.53, 841.531, -2047.97, 2559.97, 1219.97, -2039.97);
						lava.box(2240.03, 1228.03, -2049.97, 2559.97, 1807.97, -2041.97);
						lava.box(2009.55, 1216.62, -2045.97, 2246.65, 1695.82, -2037.97);
						lava.box(914.627, 1040.03, -2047.97, 2010.4, 1212.41, -2039.97);
						lava.box(725.838, 1200.29, -2047.97, 959.712, 1582.8, -2039.97);
						lava.box(956.753, 1208.94, -2047.97, 1091.49, 1362.53, -2039.97);
						lava.box(768.002, 1040.02, -2303.97, 2239.97, 2111.69, -2295.97);
						lava.box(768.009, 2079.41, -2303.97, 2239.99, 2383.97, -2271.97);
						lava.bigbox(1513.86, 1673.53, -1690, 1821.79, 1750.48, -1671.97);
						lava.bigbox(768.031, 1360.03, -1699.97, 1000.98, 1807.97, -1691.97);
						lava.bigbox(900.031, 1040.03, -1695.97, 1342.97, 1361.04, -1687.97);
						lava.box(1337.29, 1088.03, -1695.97, 2110.97, 1360.47, -1687.97);
						lava.box(2119.03, 1024.03, -1695.97, 2559.97, 1479.97, -1687.97);
						lava.box(2280.03, 973.403, -1695.97, 2332, 1026.15, -1687.97);
					}
				} else {
					if(lava.pos.x < 3455) {
						local conversionFloor = Entities.FindByName(null, "pumproom_speed_piston_4_door");
						if(!conversionFloor) lava.box(-1216.05, -1500, 0.03125, 1348.14, -449.423, 8.03125);
						lava.box(512.106, -450.398, 0.03125, 1500, 1270.97, 8.03125);
						lava.box(-1216.18, 448.751, 0.03125, 513.608, 1270.97, 8.03125);
						lava.box(-1502.38, -443.136, 0.03125, -385.897, 451.919, 8.03125);
						lava.bigbox(220.031, -839.849, 160.031, 293.44, -143.179, 168.031);
						lava.box(291.333, -611.969, 160.031, 451.969, -508.031, 168.031);
						lava.box(-319.329, -383.367, -39.9688, 447.225, 382.949, -31.9688);
						lava.box(-422.469, -261.819, 132.031, -345.531, 275.436, 140.031);
						lava.box(-255.969, -319.969, -15.9688, 383.969, 319.969, -7.96875);
						lava.box(-3.46875, 444.531, 416.031, 579.469, 931.469, 424.031);
						lava.box(795.044, -134.469, 544.031, 1248.83, 582.469, 552.031);
						lava.box(1050.77, 205.031, 608.031, 1191.97, 469.555, 616.031);
						lava.bigbox(1257.16, -220.139, 544.031, 2300.42, -16.0312, 547.031);
						lava.box(2304.03, -252.969, 544.031, 2876.97, -0.03125, 552.031);
						lava.box(2883.03, -126.969, 544.031, 3004.97, -0.03125, 552.031);
						lava.box(3011.03, -255.969, 544.031, 3452.97, -0.03125, 552.031);
					} else {
						lava.box(3694.82, -306.154, 208.031, 3982.87, 43.8756, 216.031);
						lava.safebox(3711.82, -259.969, 208.031, 3969.05, 32.1998, 4237.47);
						lava.box(3459.03, -255.655, 544.031, 3663.82, -0.03125, 552.031);
						lava.box(3501.04, -468.734, 504.031, 4179.04, 209.431, 512.031);
						lava.box(3434.42, -506.451, 1280.03, 4200.89, 210.006, 1288.03);
						lava.box(3420.46, -491.525, 1792.03, 4209.02, 214.573, 1800.03);
						lava.box(3435.23, -508.829, 2816.03, 4220.7, 197.702, 2824.03);
						lava.box(3435.69, -523.297, 3328.03, 4214.7, 224.198, 3336.03);
						lava.box(3441.72, -505.993, 3580.03, 4213.1, 220.296, 3588.03);
						lava.box(3561.53, -284.198, 4352.03, 3728.75, 134.463, 4360.03);
						lava.box(3725.53, 50.3093, 4352.03, 3944.45, 159.994, 4360.03);
						lava.box(3692.23, -278.195, 4336.03, 3988.21, 21.5362, 4344.03);
						lava.safebox(3730.53, -270.483, 4822.16, 3935.95, 10, 5002.6);
						lava.box(3491.01, -475.348, 4922.25, 4212.75, 222.602, 5000.03);
						lava.box(3561.53, -0.468747, 5632.03, 3983.68, 414.706, 5640.03);
					}
				}
				break;
			case "sp_a3_end":
				if(lava.pos.z < -1800) {
					if(lava.pos.x > -1100) {
						lava.box(-1138.55, -904.13, -5059.97, 1051.9, 1636.79, -5051.97);
						lava.box(-1095.97, 156.531, -4063.97, -916.531, 351.969, -4055.97);
						lava.safebox(-311.381, 199.122, -3861.75, -94.6889, 312.148, -3785);
						lava.box(-538.241, -96.491, -3793.97, 595.45, 749.61, -3785.97);
						lava.safebox(101.667, 222.958, -3369.58, 290.198, 293.5, -3302.87);
						lava.box(-556.873, -68.0389, -3355, 1076.8, 1353, -3335.97);
						lava.box(-715.969, 26.0312, -3343.97, -555.791, 485.969, -3335.97);
						lava.box(-591.532, -80.957, -3057.97, 562.622, 595.499, -3049.97);
						lava.box(-1135, 153.531, -3080, -570.877, 230.469, -3045);
						lava.box(-671.627, -82.7563, -2351.97, 341.777, 593.469, -2343.97);
						lava.box(-806.578, 155.396, -1939.97, -59.8666, 500.597, -1931.97);
					} else {
						lava.box(-1397.61, 153.531, -3069.97, -1135.06, 230.469, -3061.97);
						lava.box(-1391.97, -45.1448, -3070.21, -1149.14, 150.469, -3053.72);
						lava.box(-1377.29, 230.531, -3133.34, -1104.24, 359.16, -3048.3);
						lava.box(-1662.92, 153.531, -2941.97, -1575.89, 230.469, -2933.97);
						lava.safebox(-1755.12, 153.871, -2933.83, -1638.31, 230.469, -2877.29);
						lava.box(-3150.65, -969.4, -3000, -1644.903, 1579.42, -2875.97);
						lava.box(-1663.97, 233.531, -3030, -1380.61, 1533.57, -2935.97);
						lava.box(-1663.97, -178.124, -2943.97, -1390.4, 150.469, -2935.97);
						lava.box(-2398.34, -320.066, -2402.97, -1246.26, 667.371, -2394.97);
					}
				} else {
					if(lava.pos.z < 2500) {
						lava.box(-2835.76, -679.031, 638.031, -531.635, 1427.89, 646.031);
						lava.box(-2288.47, -70.4688, 770.031, -2165.42, 102.469, 778.031);
						lava.box(-2087.94, 25.5313, 834.031, -1893.29, 769.688, 842.031);
						lava.box(-2435.47, 764.531, 832.031, -1606.53, 1407.97, 840.031);
						lava.box(-1603.47, 540.531, 896.031, -960.031, 1407.97, 904.031);
						lava.box(-1361.99, -639.999, 1152.03, -960.031, -171.804, 1160.03);
						lava.box(-1766.47, 1227.58, 1632.03, -1689.53, 1404.97, 1640.03);
						lava.box(-1766.47, 748.727, 1504.03, -959.196, 1052.5, 1512.03);
						lava.box(-1191.86, -376.455, 1536.03, -963.031, 230.469, 1544.03);
					} else {
						lava.safebox(-2208.66, -73.6023, 2725.44, -1467.44, 665.933, 3017.08);
						lava.safebox(-1554.5, 281.26, 2931.46, -1399.55, 358.554, 2939.46);
						lava.box(-2475.28, -279.932, 2928.03, -1119.87, 935.766, 2936.03);
						lava.box(-1128.18, -454.792, 2900, -875.182, 1136.2, 2955.41);
						lava.box(-2471.44, 933.363, 2900, -1123.78, 1140.78, 2952.03);
						lava.box(-1895.42, -478.549, 2900, -1133.84, -277.381, 2963.37);
						lava.box(-1884.87, -423.969, 3200.03, -1807.2, -344.031, 3208.03);
						lava.box(-2303.97, -879.969, 3328.03, -2071.07, -320.016, 3336.03);
					}
				}
				break;
			case "sp_a4_intro":
				lava.box(-1202.03, -657.51, 256.031, -683.537, 209.851, 264.031);
				lava.box(-656.747, -128.118, 256.031, -512.158, 93.9986, 264.031);
				lava.box(-831.969, -287.974, 0.03125, -660.496, 725.841, 4.03125);
				lava.box(-959.995, 640.031, 128.031, -667.782, 959.969, 129.031);
				lava.box(-669.643, 864.271, 128.031, 16, 990.992, 130.031);
				lava.box(13.0312, 418.453, 0.03125, 191.969, 989.546, 4);
				lava.box(-511.969, -511.999, 0.03125, 383.969, 384.182, 8.03125);
				lava.box(-512.469, 383.801, 0.03125, -128.031, 511.969, 8.03125);

				lava.box(416.031, -118.541, 0.03125, 895.969, 114.969, 8.03125);
				lava.box(576.031, -383.998, 64.0312, 895.99, -221.749, 72.0312);
				lava.box(576.031, -127.047, 128.031, 964.902, 415.997, 136.031);

				lava.bigbox(992.031, 256.031, 512.031, 2016.47, 511.969, 520.031);
				lava.bigbox(1439.94, -0.0367651, 512.031, 1568.12, 256.106, 520.031);
				lava.bigbox(992.008, -767.969, 512.031, 2015.97, -511.839, 520.031);
				lava.bigbox(1855.99, -512.083, 512.031, 2015.97, -255.55, 520.031);
				lava.box(992.031, -511.999, 256.031, 2015.97, 255.969, 264.031);
				lava.box(2016.6, -31.6427, 512.03, 2268.99, 384.424, 520.03);

				break;
			case "sp_a4_tb_intro":
				lava.box(1024.03, 258.454, -511.969, 2047.97, 1023.97, -503.969);
				lava.safebox(1611.16, 459.724, 20, 1710.64, 562.161, 50);
				lava.box(1280.03, 256.031, 32.0312, 2111.97, 1023.97, 40.0312);
				lava.bigbox(1536.03, 128.031, 160.031, 2047.97, 256.433, 168.031);
				lava.bigbox(1536.03, 0.00281143, 288.031, 2047.97, 192.231, 296.031);
				break;
			case "sp_a4_tb_trust_drop":
				lava.bigbox(191.742, 959.924, 800.031, 447.969, 1279.97, 808.031);
				lava.bigbox(-577.191, 384.031, 224.031, -320.031, 544.805, 232.031);
				lava.bigbox(-384.106, 384.031, 928.031, 64.1221, 704.02, 936.031);
				lava.bigbox(63.813, 384.031, 928.031, 445.547, 512.002, 936.031);
				break;
			case "sp_a4_tb_wall_button":
				lava.box(-71.8054, 1535.44, 0.03125, 253.547, 2207.97, 8.03125);
				lava.box(-664.231, 510.019, 0.00206757, 543.969, 1535.97, 8.00207);
				lava.box(-1787.97, 516.031, -0.468754, -1391.44, 1531.97, 7.53125);
				lava.box(415.614, 761.36, 128.031, 640.561, 1152.44, 136.031);
				break;
			case "sp_a4_tb_polarity":
				lava.safebox(-478.159, 1824.03, -31.1871, -320.031, 2232.67, 41.2449);
				lava.box(-575.994, 1230.65, 0.03125, 450.75, 2225.42, 8.03125);
				lava.bigbox(-582.724, 82.6563, 0.03125, 447.995, 608.555, 8.03125);
				lava.box(-319.969, -31.9687, 256.031, 63.9688, 114.438, 264.031);
				break;
			case "sp_a4_tb_catch":
				lava.box(-63.9688, -1503.97, -95.9688, 253.547, -1248.52, -87.9688);
				lava.box(-512, -1247.99, -95.9688, 511.969, -911.622, -87.9688);
				lava.box(-144.554, -912.54, -95.9688, 145.815, -654.464, -87.9688);
				lava.box(-145.021, -81.5748, -143.969, 144.745, 209.19, -135.969);
				lava.box(-144.94, 653.534, -143.969, 145.061, 1072.13, -135.969);
				lava.box(363.556, 687.628, 288.031, 770.242, 1249.99, 296.031);
				break;
			case "sp_a4_stop_the_box":
				lava.box(-253.573, 768.345, 640.031, 63.9997, 1023.97, 648.031);
				lava.safebox(240.405, 50.1855, 621.674, 526.799, 590.625, 678.199);
				lava.box(-702.848, -537.348, 640.031, 529.662, 785.245, 648.031);
				lava.box(-278.706, -447.969, 896.031, 703.969, -163.929, 904.031);
				lava.box(576.031, -164.234, 896.031, 703.969, 32.6853, 904.031);
				lava.box(231.094, -269.286, 768.031, 593.242, -135.954, 776.031);
				lava.box(224.031, -147.506, 480.031, 914.167, 607.969, 488.031);
				break;
			case "sp_a4_laser_catapult":
				lava.box(-1215.97, -477.546, 0.03125, -638.575, -255.99, 8.03125);
				lava.box(-959.982, -511.969, 0.03125, -704.031, -476.663, 8.03125);
				lava.box(-639.969, -767.969, 0.03125, -128.012, 542.537, 8.03125);
				lava.box(-127.969, -895.988, 0.03125, 16.9661, -0.00230408, 8.03125);
				lava.box(16.7185, -895.996, 0.03125, 511.969, -111.211, 8.03125);
				lava.box(-390.263, 476.953, 316.437, -128.031, 691.998, 334.535);
				lava.box(-515.969, 551.896, 344.247, -371.051, 691.969, 353.711);
				lava.box(0.03125, -127.969, -127.969, 1087.97, 383.969, -119.969);
				lava.box(1071.62, -127.969, 128.031, 1343.97, 255.969, 136.031);
				lava.box(444.74, -639.969, 507.535, 575.969, -367.504, 515.535);
				break;
			case "sp_a4_laser_platform":
				lava.box(-509.546, -1680.36, 0.000240326, 891.72, -1152.03, 8.00024);
				lava.box(-511.969, -2559.97, 0.0447388, -111.214, -2030.92, 8.04474);
				lava.box(115.621, -1119.97, 4.03125, 199.969, -1006.29, 12.0312);
				lava.box(120.031, -823.154, -123.969, 199.969, -713.444, -115.969);
				lava.box(2231.08, -712.417, -2047.97, 2752.65, -447.253, -2039.97);
				lava.box(2616.03, -1062.44, -2047.97, 2695.97, -712.031, -2039.97);
				lava.bigbox(2624.03, -1287.97, -2351.97, 3539.97, -1210.03, -2343.97);
				lava.box(2624.75, -1211.06, -2351.97, 2703.97, -1120.72, -2343.97);
				break;
			case "sp_a4_speed_tb_catch":
				lava.box(-1151.97, 1000, -208, 680, 1751.55, -183.969);
				lava.bigbox(-2629.969, 1760.38, -0.468754, -1790.04, 2576.47, 7.53125);
				lava.bigbox(-2432.35, 464.031, 0.03125, -1920.03, 784.597, 8.03125);
				lava.box(-2726.81, 1088.91, -10, -2653.28, 2200, 16.0312);
				break;
			case "sp_a4_jump_polarity":
				lava.box(1440.03, -191.969, 128.031, 2527.97, 63.9688, 136.031);
				lava.box(1280.41, -191.969, 128.031, 1407.97, 56.9992, 136.031);
				lava.bigbox(703.766, -319.969, 120.031, 1279.97, 640.138, 136.031);
				lava.bigbox(-701.674, -319.969, -8.03125, -63.8299, 192.263, 8.03125);
				lava.box(750.837, 641.328, 120, 1106.61, 1105.01, 136.031);
				lava.box(768.031, 1966.83, 384.031, 1105.1, 2839.44, 392.031);
				lava.box(2440.15, -4273.44, 368.031, 2676.39, -3742.86, 376.031);
				break;
			case "sp_a4_finale1":
				lava.box(-1889.38, -7823.31, -63.9688, -976.972, -7534.37, -55.9688);
				lava.box(-2848.92, -8063.49, -63.9991, -1920.03, -7296.03, -55.9991);
				lava.box(-3839.97, -8063.97, 128.031, -3567.69, -7296.03, 136.031);
				lava.box(-3487.97, -5706.21, -927.969, -2488.71, -4823.75, -919.969);
				lava.box(-10620, -2552.17, 77.4912, -9460.7, -1919.93, 85.4912);
				lava.box(-10939.9, -2473.01, 77.4912, -10617, -1979.15, 85.4912);
				lava.box(-11040, -3055.97, 334.031, -10832, -2842.85, 342.031);
				lava.bigbox(-11040, -2845.2, 310, -10964.5, -1537.92, 341.491);
				lava.bigbox(-12872, -2780.5, -175.969, -12218.2, -1450.03, -167.969);
				break;
			case "sp_a4_finale2":
				lava.box(3071.31, 640.031, -191.969, 3967.99, 764.353, -183.969);
				lava.box(11712, 11328, 8192.03, 12608, 12224, 8200.03);
				lava.box(-190.741, -395.459, -191.969, 787.348, 743.969, -183.969);
				lava.box(-551.969, -23.1543, -63.9688, -370.524, 743.969, -55.9688);
				lava.box(-1279.97, -127.999, 0.03125, -623.485, 511.969, 8.03125);
				lava.box(-547.038, -435.932, -15, -472.031, -110.522, 8.03125);
				lava.box(67.7883, -960.432, -127.969, 767.969, 511.969, -119.969);
				lava.box(-749.971, -1279.8, -511.969, 703.969, -800.031, -503.969);
				lava.box(-2700, -1271.97, -511.969, -766.031, -928.909, -503.969);
				lava.box(-3969, -1004.74, -480, -2585.03, 20, -439.969);
				lava.bigbox(-2689.97, -767.969, -255.969, -2559.9, -128.031, -247.969);
				lava.bigbox(-2431.97, -128.822, -383.969, -1536.01, 127.969, -375.969);
				lava.bigbox(-2048.4, -448.252, -383.969, -1791.82, -128.742, -375.969);
				lava.box(-2567.26, -914.668, -639.969, -1327.41, -105.828, -631.969);
				lava.box(-3215.99, -1629.05, -319.969, -3074.05, -1141.26, -311.969);
				break;
			case "sp_a4_finale3":
				lava.box(-389.855, -2722.84, 128.031, 799.969, -2242.78, 136.031);
				lava.box(-539.984, -1819.97, -79.9688, 223.969, -1536.03, -71.9688);
				lava.box(-415.969, -1532.97, -63.9688, 248.932, -855.479, -55.9688);
				lava.box(-129.561, -829.495, -63.9688, 233.59, -533.007, -55.9688);
				lava.box(0.03125, -575.969, -191.969, 225.086, -396.577, -183.969);
				lava.box(305.541, -639.969, -127.969, 423.969, -480.031, -119.969);
				lava.box(-82.8535, -263.969, -193.969, 156.381, -125.504, -185.969);
				lava.box(272.031, -290.745, -257.969, 511.969, -200.031, -249.969);
				lava.box(-1215.97, 4.03125, -319.969, -118.853, 1874.2, -318.02);
				lava.box(-517.969, 4666.03, -59.9688, 134.656, 4855.77, -51.9688);
				lava.box(-727.211, 5220.75, 192.031, -307, 5522.8, 200.031);
				local fin3conveyor = Entities.FindByName(null, "conveyor_gate_clip");
				if(fin3conveyor) lava.bigbox(-1275.97, -411.969, -260.969, 735.969, -290, -256.969);
				break;
			case "sp_a4_finale4":
				if(lava.pos.z < -400) {
					lava.box(-1781.19, -735.888, -3007.97, -1575.82, -392.936, -2999.97);
					lava.bigbox(-1743.97, -687.969, -2683.97, -1596.03, -431.999, -2675.97);
					lava.box(-1787.63, -454.899, -1535.97, -1150, 143.969, -1533.97);
					lava.box(-1172.65, -339.93, -1527.97, -280.517, -140.031, -1526.97);
					lava.box(-100.724, -339.992, -1399.97, 35.9688, -144.578, -1391.97);
				} else {
					/*local fin4white = Entities.FindByName(null, "wheatley_shadow_brush");
					if(fin4white) */lava.box(-1536, -1023.97, 0.03125, 1535.97, 1663.97, 2.03125);
					//else lava.box(-1536, -1023.97, 0.03125, 1535.97, 1663.97, 8.03125);
					local fin4catwalk = Entities.FindByName(null, "catwalk2_model");
					if(!fin4catwalk) lava.safebox(-647.669, 113.438, 331.767, -427.427, 411.619, 424.485);
					lava.box(-607.969, -127.969, 384.031, -447.448, 799.992, 392.031);
					lava.box(-451.634, 549.838, 384.031, -135.747, 799.969, 392.031);
				}
				break;
		}
	} catch(e) { }

	local health = GetPlayer().GetHealth();
	if(health < 0) health = 0;
	lava.textent.__KeyValueFromString("Message", "Health: " + health);
	EntFireByHandle(lava.textent, "Display", "", 0, null, null);

}

// Stops P2SM from screaming about missing functions.
local nfunc = function(){};
AddModeFunctions("floorislava", nfunc, nfunc, nfunc, nfunc);